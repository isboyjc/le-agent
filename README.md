# 小乐语言学习助手 (Le-Agent)

## 📖 项目简介

小乐语言学习助手是一个基于 AI Agent 的智能语言学习平台，集成了先进的语言模型、语音技术和互动学习功能，为用户提供个性化的语言学习体验。

### ✨ 核心特性

- 🤖 **智能AI对话**：基于通义千问、DeepSeek等先进语言模型
- 🎯 **个性化学习**：根据用户语言水平和学习目标定制内容
- 🗣️ **语音交互**：支持语音合成（朗读）和语音识别（发音练习）
- 📚 **智能内容解析**：自动识别句子、词汇、生成翻译
- 🎮 **互动学习模式**：词汇跟读、句子练习、发音评估
- 🔧 **工具扩展**：支持MCP协议，可集成外部工具和资源
- 🌍 **多语言支持**：支持英语、中文、日语、韩语、法语、德语、俄语等

## 🚀 快速开始

### 环境要求

- Node.js 18+

### 安装运行

```bash
# 克隆项目

# 进入项目目录
cd le-agent

# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev

# 构建项目
pnpm build

# 启动生产服务器
pnpm start
```

### 环境配置

创建 `.env.local` 文件：

```bash
# 模型服务配置
MODEL_SCOPE_API_KEY=your_api_key
MODEL_SCOPE_BASE_URL=https://api.modelscope.com/v1
```

## 🎯 使用指南

### 1. 基础对话

- 访问主页开始与小乐对话
- 直接用自然语言描述学习需求

**示例对话：**

```
用户: 我想学习职场英语，请给我生成一段职场交流的短文
用户：我想学习日语，请你帮我生成一篇简单的日语短文
```

### 2. 学习模式使用

#### 激活学习模式

- 当小乐生成学习内容时，会自动打开学习模式
- 或点击内容右上角的📖图标手动打开

#### 学习功能

- **词汇学习**：鼠标悬停词汇自动朗读，显示翻译
- **发音练习**：点击🎤图标进行词汇跟读练习
- **句子练习**：整句发音练习和评估
- **进度追踪**：系统记录学习进度，词汇掌握状态

#### 语音功能

- **自动朗读**：启用后悬停词汇自动朗读
- **发音评估**：
  - 🟢 绿色：发音正确（需连续2次成功）
  - 🔴 红色：需要改进
  - 🔵 蓝色：正在监听

### 3. 工具集成 (@mention)

使用 `@` 符号调用特定工具：

```
@tool("weather") 查询今天北京天气
@mcp("BingSearch") 搜索语言学习资料
```

#### 可用工具

- **Bing搜索工具**：网络搜索、资料查找

### 4. 学习内容定制

#### 学习主题

```
我想学习日语，我的母语是中文，我是初学者
帮我生成关于旅游的英语对话，难度适中
```

#### 难度调节

- 初学者（Level 1）：基础词汇，简单句型
- 入门级（Level 2）：常用词汇，基本对话
- 中级（Level 3）：复杂句型，话题讨论
- 高级（Level 4）：专业词汇，深度交流
- 精通级（Level 5）：母语水平，学术讨论

## 📱 功能详解

### 智能学习内容生成

小乐能够生成结构化的学习内容，包含：

```json
{
  "type": "article",
  "target_language": "en",
  "user_language": "zh",
  "article": {
    "content": "原文内容",
    "translation": "翻译内容",
    "sentence_groups": [
      {
        "sentence": "句子",
        "translation": "句子翻译",
        "words": [
          {
            "word": "单词",
            "translations": ["翻译1", "翻译2"]
          }
        ]
      }
    ]
  }
}
```

### 语音技术支持

#### 语音合成（TTS）

- 支持50+种语言和方言
- 可调节语速、音调、音量
- 智能语言检测和适配

#### 语音识别（STT）

- 实时语音转文字
- 多语言识别支持
- 发音准确度评估

## 🛠️ 高级配置

### MCP服务器配置

编辑 `.mcp-config.json` 文件：

```json
{
  "BingSearch": {
    "url": "https://mcp.api-inference.modelscope.net/xxxxx/sse",
    "headers": {}
  },
  "LocalTool": {
    "command": "python",
    "args": ["tool.py"],
    "env": {
      "API_KEY": "your_key"
    }
  }
}
```

### 工具模式

- **自动模式**：AI自动决定何时使用工具
- **手动模式**：使用工具前询问用户确认
- **禁用模式**：不使用工具（@mention 仍可用）

### 模型配置

默认配置支持的模型提供商：

- ModelScope（通义千问系列）
- DeepSeek

如想支持其他提供商，可在 `lib/ai/models.ts` 文件新增提供商以及模型

## 🔧 技术架构

### 前端技术栈

- **框架**：Next.js 15
- **UI库**：Radix UI + Tailwind CSS
- **状态管理**：Zustand
- **语音处理**：Web Speech API
- **国际化**：next-intl

### 后端技术栈

- **AI集成**：Vercel AI SDK
- **协议支持**：Model Context Protocol (MCP)
- **数据存储**：本地文件系统
- **部署** Docker

### 核心组件

- **ChatBox**：主聊天界面
- **LeagentDiagram**：翻译学习内容 CodeBlock 渲染
- **LeagentLearningPopup**：学习模式组件
- **SpeechSynthesis**：语音合成
- **SpeechRecognition**：语音识别

## 🌟 使用场景

### 学生用户

- 课程辅助学习
- 考试准备（雅思、托福、高考等）
- 作业帮助和语法检查

### 职场人士

- 商务英语提升
- 国际会议准备

### 语言爱好者

- 多语言学习
- 文化交流准备
- 旅游前语言突击

## 🎯 最佳实践

### 有效学习建议

1. **设定明确目标**

   ```
   我想在3个月内达到英语口语中级水平，重点是商务场景
   ```

2. **循序渐进**

   ```
   我想在3个月内达到英语口语中级水平，重点是商务场景
   请你从简单词汇开始，逐步增加句子复杂度
   今天是第一天，现在请你帮我生成英语短文，100 词内
   ```

3. **多模态学习**
   - 结合听说读写
   - 利用语音功能练习发音
   - 通过对话加深理解

4. **持续练习**
   - 每天至少15分钟
   - 利用碎片时间学习

### 技巧分享

- **发音练习**：多次重复直到获得绿色标记
- **词汇记忆**：结合语境理解单词含义
- **语法学习**：通过拆解的句子语义理解语法规则

## 🔍 常见问题

### Q: 为什么语音功能不可用？

A: 请确保：

- 使用支持的浏览器（Chrome/Edge推荐）
- 已授权麦克风权限
- 网络连接正常

### Q: 如何添加新的MCP工具？

A: 编辑 `.mcp-config.json` 文件，添加工具配置，重启服务器。

### Q: 学习进度会保存吗？

A: 不会，所以请自行保存适合自己的学习计划 Prompt

### Q: 如何自定义学习内容？

A: 通过自然语言描述需求，小乐会生成相应的学习内容，最好是短文。

## 🤝 社区支持

- **项目地址**：https://www.modelscope.cn/studios/isboyjc/le-agent
- **问题反馈**：通过 魔搭 Issues
- **功能建议**：欢迎提交 Pull Request

## 📄 开源协议

本项目采用 Apache License 2.0 开源协议。

---

🎓 **开始您的语言学习之旅吧！小乐随时准备为您提供最贴心的学习帮助。**
